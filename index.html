<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cozinha Palevá</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
  <div id="app">
    <nav>
      <h1>
        Cozinha Palevá
      </h1>
      <ul>
        <li v-if="current_store">
          <div>
            <address>{{current_store.trade_name}}</address>
            <address>CNPJ: {{current_store.register_number}}</address>
            <address>Código {{current_store.code}}</address>
          </div>
          <div>
            <button v-on:click="logoutStore()">Sair</button>
          </div>
        </li>
        <li v-else>
          <div>
            <input type="text" v-model="store_code" placeholder="Insira o código">
            <button v-on:click="getStore(store_code)">Buscar</button>
          </div>
          <p>Insira o código do Estabelecimento</p>
        </li>
      </ul>
    </nav>

    <main>
      <div v-if="message">
        <strong>{{ message }}</strong>
      </div>
      <div v-if="current_store">
        <h2>Pedidos</h2>
        <div>
          <select v-model="selected">
            <option disabled value="">Selecione</option>
            <option value="all">Todos</option>
            <option value="waiting_confirmation">Pendentes</option>
            <option value="preparing">Aceitos</option>
            <option value="done">Finalizados</option>
          </select>
        </div>

        <div id="orders">
          <div v-if="message_orders">
            {{message_orders}}
          </div>
          <div>
            <ul>
              <li v-for="order in Orders">
                <div>
                  <div>
                    <h5>{{order.code}}</h5>
                    <small>{{order.name}}</small>
                  </div>
                  <button v-on:click="showModal(order.code)" >Mais informações</button>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <dialog id="order_details">
          <span>{{message_order}}</span>
          <h3>Pedido {{Order.code}}</h3>
          <h4>Status {{Order.status}}</h4>
          <h4>Solicitado {{Order.created_at}}</h4>
          <div>
            <span>Cliente {{Order.name}}</span>
            <span>CPF {{Order.register_number}}</span>
            <address>Telefone {{Order.phone_number}}</address>
            <address>E-mail {{Order.email}}</address>
          </div>
          <div>
            <ul>
              <li v-for="item in Order.items">
                <span>{{item.menu}}</span>
                <span>{{item.item}}</span>
                <span>Opção {{item.portion}}</span>
                <span>Quantidade {{item.quantity}}</span>
                <span>Observação {{item.observation}}</span>
              </li>
            </ul>
          </div>

          <div>
            <button v-if="Order.status == 'waiting_confirmation'" v-on:click="patchPreparing(Order.code)">Aceitar</button>
            <button v-if="Order.status == 'preparing'" v-on:click="patchDone(Order.code)">Finalizar</button>
          </div>
        </dialog>
      </div>

    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="main.js"></script>
</body>
</html>